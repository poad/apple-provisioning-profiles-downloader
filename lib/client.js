"use strict";var appStoreConnect,_regeneratorRuntime=_interopRequireDefault(require("regenerator-runtime")),_appstoreConnectJwtGeneratorCore=_interopRequireDefault(require("appstore-connect-jwt-generator-core")),_crossFetch=_interopRequireDefault(require("cross-fetch"));function asyncGeneratorStep(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}function _asyncToGenerator(k){return function(){var l=this,m=arguments;return new Promise(function(b,c){var a=k.apply(l,m);function d(i){asyncGeneratorStep(a,b,c,d,e,"next",i)}function e(n){asyncGeneratorStep(a,b,c,d,e,"throw",n)}d(void 0)})}}function _interopRequireDefault(o){return o&&o.__esModule?o:{default:o}}!function(p){var q,r=_asyncToGenerator(_regeneratorRuntime.default.mark(function _callee(s){var t,u,v,w,x;return _regeneratorRuntime.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return t=s?Object.entries(s).map(function(z){return"".concat(z[0],"=").concat(encodeURIComponent(z[1]))}).reduce(function(A,B){return"".concat(A,"&").concat(B)}):"",u={Authorization:"Bearer ".concat(q)},v="https://api.appstoreconnect.apple.com/v1/bundleIds".concat(t.length>0?"?":"").concat(t),y.next=5,_crossFetch.default(v,{headers:u});case 5:if(!(200!==(w=y.sent).status)){y.next=12;break}return y.next=9,w.text();case 9:throw x=y.sent,console.error(x),new Error(x);case 12:return y.abrupt("return",w.json());case 13:case"end":return y.stop()}},_callee)}));p.Client=function(C){var D=C.privateKey,E=C.issuerId,F=C.apiKeyId;return{listBundleIds:r,token:function(){return q=_appstoreConnectJwtGeneratorCore.default.tokenSync(D,E,F,C.duration)}}}}(appStoreConnect||(appStoreConnect={}))